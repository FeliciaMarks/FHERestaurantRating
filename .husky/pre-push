#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Run security audit
echo "ğŸ”’ Running security audit..."
npm run security:check || {
  echo "âš ï¸  Security vulnerabilities detected. Review before pushing."
}

# Generate gas report
echo "â›½ Generating gas report..."
REPORT_GAS=true npm test > /dev/null 2>&1

# Run coverage check
echo "ğŸ“Š Checking test coverage..."
npm run test:coverage || {
  echo "âŒ Coverage generation failed."
  exit 1
}

echo "âœ… All pre-push checks completed!"
